package main

import (
	"fmt"
	"strconv"
	"strings"
)

var mask string

var memb = make(map[int64]int)

func main() {
	parta()

	mem = make(map[int]int64)
	mask = "00000X110010111111X000100XX01010000X"
	memMask(20690, 435)
	memMask(54036, 231)
	memMask(27099, 118644255)
	memMask(55683, 22299263)
	memMask(26119, 2279399)
	mask = "00X000X0001X111111101X1111XX11X001XX"
	memMask(42072, 1658073)
	memMask(63234, 2277)
	mask = "1001X010011011111110101101X0XX11X010"
	memMask(31090, 52291)
	memMask(31244, 377352406)
	memMask(10621, 18801757)
	memMask(31666, 5100853)
	mask = "10X0110X11XX101XX1000011001001010100"
	memMask(18680, 80608039)
	memMask(13197, 7957847)
	memMask(17080, 117501010)
	mask = "1000110011111X11X1XXXX1X000X010011X1"
	memMask(25308, 257586)
	memMask(14518, 62108102)
	memMask(21633, 1544993)
	memMask(36955, 1363)
	memMask(45764, 49755959)
	memMask(40967, 425)
	memMask(47858, 611686)
	mask = "0010111010X0111111011X0110X0101010X1"
	memMask(7451, 1208)
	memMask(31918, 769)
	memMask(29313, 1888678)
	memMask(52254, 32237487)
	mask = "00X001001111X11111X010000X0110XX0X11"
	memMask(61531, 15796066)
	memMask(305, 130785)
	memMask(25845, 197912)
	memMask(29251, 374061)
	memMask(37177, 17950)
	mask = "100100X00110111111100110001X1X100X00"
	memMask(40491, 66538375)
	memMask(42244, 240009051)
	memMask(18805, 33518831)
	memMask(17072, 518835559)
	mask = "XX100100X1101X11010001X11001100XX1XX"
	memMask(16935, 1124623)
	memMask(45248, 155461)
	memMask(37224, 5755511)
	mask = "00X011101110101X10X1XXX1100X0001000X"
	memMask(6440, 116801)
	memMask(193, 7318437)
	memMask(58568, 8082803)
	memMask(43695, 909697)
	memMask(29001, 27290)
	memMask(29210, 91241)
	mask = "XXX01X001111111111101010000001XX1011"
	memMask(21289, 354401446)
	memMask(33814, 1605382)
	memMask(16967, 242083755)
	memMask(60470, 22550)
	memMask(16485, 3945104)
	memMask(37687, 86474)
	memMask(51031, 5255)
	mask = "00100100111101111100100X0X001XX10011"
	memMask(34832, 191857526)
	memMask(30126, 180246093)
	memMask(310, 1895)
	memMask(49300, 117732)
	mask = "00000100011011X11X10010XX1XX0X1101XX"
	memMask(54544, 1368)
	memMask(30126, 596855)
	memMask(18483, 124319430)
	memMask(63246, 95337119)
	memMask(3917, 1620395)
	mask = "00XX010001101111X110011X010100X10XX1"
	memMask(31090, 203896198)
	memMask(36989, 203)
	memMask(8762, 372392)
	memMask(59728, 486751)
	mask = "00101X00X11X11111X100010XXXX0011011X"
	memMask(59728, 30591660)
	memMask(43720, 315507593)
	memMask(39732, 42157)
	memMask(3440, 242110717)
	memMask(36955, 871544)
	memMask(51251, 2489781)
	mask = "00X00X0X01111111110000001100100X0011"
	memMask(51149, 12451455)
	memMask(17566, 351620601)
	memMask(33842, 1119118)
	memMask(23677, 100601411)
	memMask(12826, 2474316)
	mask = "00X00100XX1111111110111X1X010X10010X"
	memMask(43163, 27012)
	memMask(53314, 2717910)
	memMask(20842, 239857)
	memMask(43816, 3173699)
	memMask(11343, 37315312)
	memMask(37493, 262038)
	memMask(25824, 13598271)
	mask = "00X0X00001101X1X10100000110001110101"
	memMask(39732, 1402)
	memMask(50014, 32437274)
	memMask(10770, 192187204)
	mask = "000101110110X111111011010X11000000XX"
	memMask(51283, 2490405)
	memMask(33814, 471881)
	memMask(15119, 3807095)
	mask = "000X00XX0X10111111X0011XX11X10X00010"
	memMask(10405, 46099021)
	memMask(42308, 1001)
	memMask(57329, 2310)
	mask = "11X10110011XX100XX1010101100010X0000"
	memMask(40240, 28185370)
	memMask(43296, 2212)
	memMask(15632, 3512122)
	memMask(61953, 2534700)
	memMask(58797, 258533)
	mask = "00000X00011X1X11X1X001000010010X1110"
	memMask(13671, 66116)
	memMask(5234, 46868488)
	memMask(48068, 259070)
	memMask(35833, 1904)
	mask = "XX1101000XX01111X1100XX10X1000011000"
	memMask(58276, 827)
	memMask(29197, 6552)
	memMask(21249, 173)
	memMask(5723, 4730123)
	memMask(59627, 3299104)
	memMask(17008, 74955518)
	mask = "0X000100111111XX11001000000110X00100"
	memMask(53231, 909153)
	memMask(28837, 1739162)
	memMask(21336, 3932)
	memMask(32899, 872661)
	memMask(29051, 228916)
	mask = "0X1X11000111111X101111100000X10X00XX"
	memMask(23121, 4940)
	memMask(64259, 339599819)
	memMask(268, 2533)
	memMask(5725, 1430)
	memMask(56946, 618)
	mask = "001X1X0001111111101001111001X101XX10"
	memMask(46780, 339675)
	memMask(57420, 10161)
	memMask(32105, 5534)
	mask = "X1000X10011001111110110100X01010X011"
	memMask(47922, 892051565)
	memMask(50583, 2962439)
	memMask(43673, 107)
	mask = "000001001X11011111101X00XX1111100111"
	memMask(17938, 29693823)
	memMask(27809, 17197)
	memMask(62755, 6590924)
	memMask(26483, 15837)
	memMask(5245, 486)
	memMask(8213, 1239)
	mask = "0010X0000XX11XX1100010X0X11000101XX1"
	memMask(3842, 3541)
	memMask(55663, 76779528)
	memMask(29851, 2801)
	mask = "XX011X0001111111X1XX0000000001X00010"
	memMask(20066, 97384)
	memMask(35212, 10209)
	memMask(15847, 499740)
	memMask(9349, 9638367)
	mask = "001011X00XXX11X111100X1XX00010100X01"
	memMask(52845, 1056563)
	memMask(30126, 13918626)
	memMask(17709, 25538089)
	memMask(1413, 459461)
	memMask(59577, 52944410)
	mask = "X1011001X0XX111011100XX010101X01X010"
	memMask(56449, 144)
	memMask(8753, 984864)
	memMask(23728, 173703761)
	memMask(34970, 28269)
	memMask(32500, 49931)
	mask = "X0000100111X11111110X10X0101001100X1"
	memMask(64582, 6646737)
	memMask(37177, 10)
	memMask(57474, 313623)
	memMask(17322, 147838906)
	memMask(28766, 15110001)
	memMask(49, 80836580)
	mask = "001010000X11111X10X0X111X0XX00X100X1"
	memMask(53163, 15243)
	memMask(61002, 406400)
	memMask(28930, 465647779)
	mask = "0010000X11101111100010X00XX1XX01XX01"
	memMask(1315, 625209)
	memMask(44187, 14395)
	mask = "X0010XX0011011111110110X0101XX0X00XX"
	memMask(31859, 95408)
	memMask(16534, 121119590)
	memMask(26550, 8188494)
	memMask(37302, 407378)
	mask = "001XX1XXX1111X1110100001X00000111001"
	memMask(37574, 31364)
	memMask(26443, 2676291)
	memMask(22192, 26966115)
	mask = "001X010X001X011110001101XXX0X101XX11"
	memMask(41368, 50472035)
	memMask(25252, 3850)
	memMask(21011, 7912441)
	memMask(55890, 2474497)
	mask = "0010010000X11XX111X0101X100000101000"
	memMask(57489, 10006848)
	memMask(7880, 30889)
	memMask(54742, 14408)
	mask = "0010100X00X1X11X101000X1X00X001100XX"
	memMask(28474, 137340532)
	memMask(57910, 3261)
	memMask(35212, 974067528)
	memMask(24595, 15641)
	mask = "0X0X01X00110X11111X0X001X1011010X101"
	memMask(1515, 4597)
	memMask(20626, 483632)
	memMask(50912, 101611112)
	memMask(62450, 463312)
	mask = "00101X000X0111011110X10X10011X100001"
	memMask(5378, 132014)
	memMask(13345, 2058543)
	memMask(42684, 2824)
	memMask(34576, 6385683)
	memMask(27201, 2519)
	memMask(9632, 202081)
	mask = "X0X1010001X011X111100001001X01XX1XX1"
	memMask(1538, 2389067)
	memMask(4972, 19131)
	memMask(23129, 256828081)
	memMask(17188, 185346747)
	memMask(44295, 143437003)
	memMask(44830, 5686)
	memMask(46528, 4177799)
	mask = "X0010010001X1111110011X011XX11X1X011"
	memMask(7033, 2748)
	memMask(2431, 17997007)
	memMask(13924, 90861)
	memMask(63656, 497878)
	memMask(61841, 891)
	memMask(10405, 6177)
	memMask(55811, 43078384)
	mask = "X110XX0011111XX1X11001X000000001X000"
	memMask(62283, 8553774)
	memMask(14788, 308418)
	memMask(5878, 2324)
	mask = "0000010001101111101XX1X00001001101XX"
	memMask(23816, 69720)
	memMask(29524, 197631)
	mask = "10X100100011X111110011010X0X10X10XX1"
	memMask(5288, 1072)
	memMask(34681, 1902)
	memMask(47529, 1012160)
	memMask(42117, 232642695)
	memMask(7153, 420427964)
	memMask(23129, 10261)
	memMask(24545, 1661292)
	mask = "X1011X010XX0X1X1X010001001001X001111"
	memMask(3984, 17460969)
	memMask(43208, 1626)
	memMask(12288, 3244)
	memMask(1261, 685777140)
	memMask(35662, 3875)
	memMask(13197, 807702837)
	memMask(8450, 39850899)
	mask = "001X0X00011X11111000000110010X0XXX1X"
	memMask(35167, 3384)
	memMask(1969, 3362919)
	memMask(4732, 99083530)
	memMask(58162, 1382314)
	mask = "10000X10011011X11010000X11X1X0010100"
	memMask(50583, 4112)
	memMask(4097, 907)
	memMask(45785, 1275731)
	memMask(31108, 7733)
	memMask(50267, 2625942)
	mask = "X0010X1001X011111110110011000111X0X0"
	memMask(35870, 1100551)
	memMask(8514, 8042956)
	memMask(10848, 96032)
	memMask(44678, 213384)
	memMask(25743, 3586812)
	memMask(34074, 991022)
	mask = "X010X1001111X1111110010X000011000011"
	memMask(61953, 3703)
	memMask(41415, 250960289)
	memMask(24262, 14129393)
	mask = "000X010XX11011X111100100110X001000X0"
	memMask(51393, 320156165)
	memMask(27955, 21751009)
	memMask(61468, 8941693)
	memMask(24188, 176466079)
	memMask(10717, 2950)
	mask = "0010XX00X11110101000X0110000X101X100"
	memMask(37149, 18981413)
	memMask(12384, 479738)
	memMask(17072, 5196)
	memMask(59325, 170080)
	memMask(3269, 86268393)
	memMask(48598, 18530)
	memMask(11287, 4082)
	mask = "0X101100X11X11111X10X0X01000X1110010"
	memMask(47267, 12410)
	memMask(8609, 6923289)
	memMask(28364, 23091829)
	memMask(63780, 858)
	memMask(21558, 48929393)
	memMask(46110, 74033138)
	mask = "001011X0011111111010X10100X10X000011"
	memMask(30364, 14013071)
	memMask(23121, 5777)
	memMask(54108, 11707710)
	mask = "0010XX00X11X11111XX010X00X000X010011"
	memMask(29453, 3480476)
	memMask(7516, 869816189)
	memMask(57136, 130673464)
	memMask(8609, 2000)
	memMask(45543, 1014823)
	memMask(3249, 75)
	memMask(14460, 18422415)
	mask = "000X011000111X1X111010X0X10X11X10011"
	memMask(14556, 7853751)
	memMask(29755, 535169084)
	memMask(24262, 4027)
	memMask(34051, 13187123)
	mask = "000X011X0X1X1111X110000000XX0000X11X"
	memMask(13879, 2383)
	memMask(57329, 749)
	memMask(54544, 3055190)
	mask = "00110XX00111111X10010001XX1000101000"
	memMask(4852, 429814346)
	memMask(55439, 7610)
	memMask(31685, 811508716)
	memMask(38296, 185763)
	memMask(16482, 3668)
	memMask(47529, 3803)
	mask = "X01011000111111X1011010101101X011X01"
	memMask(58499, 851439)
	memMask(38516, 3082)
	memMask(32500, 364520)
	mask = "001X110001111X10X000001011X001000101"
	memMask(44653, 157371860)
	memMask(2226, 58088617)
	memMask(10098, 67459)
	memMask(45739, 3994)
	memMask(4180, 206930963)
	mask = "001XX0000XX1111010X00011000001011011"
	memMask(53876, 843104)
	memMask(56118, 1019)
	memMask(39503, 6758)
	memMask(24134, 9483199)
	memMask(25914, 26956)
	memMask(10098, 63837172)
	memMask(40642, 2366588)
	mask = "0XX10X1001X1111X1X101010010XX01000X0"
	memMask(16432, 17158914)
	memMask(29927, 9292527)
	memMask(57922, 24395252)
	memMask(48327, 253)
	memMask(15450, 496726)
	memMask(57027, 518857449)
	mask = "0101XXX0011X11111110X0XX01X010000111"
	memMask(39393, 570)
	memMask(38893, 21253926)
	mask = "0010010X01XX1X1101100000010100110101"
	memMask(64325, 416581774)
	memMask(26376, 1666947)
	memMask(6276, 90042)
	mask = "0X00001101101111X11X010010XX1X1XX01X"
	memMask(20354, 2180)
	memMask(50761, 7237731)
	memMask(54710, 5718)
	memMask(43883, 2618938)
	memMask(59235, 22130448)
	memMask(59325, 14410783)
	mask = "00000001X0101X11X110101001X11100X0X1"
	memMask(24262, 10756242)
	memMask(59282, 296121)
	memMask(15931, 49)
	memMask(44067, 339152264)
	memMask(22192, 2750756)
	memMask(897, 639)
	mask = "001011X011111X1110X01X01X0XX0101X101"
	memMask(21410, 5056)
	memMask(43472, 198924166)
	memMask(50343, 5363196)
	memMask(7486, 773744)
	memMask(49418, 77311216)
	mask = "001X0000011011111X00000X1011X1X01XX0"
	memMask(19633, 5522082)
	memMask(4682, 51724569)
	memMask(36252, 260)
	mask = "001011X0111X1X1110XX000X100001X100X0"
	memMask(34373, 803)
	memMask(61841, 25585959)
	memMask(29051, 2011)
	memMask(53885, 4255251)
	memMask(55135, 49781551)
	memMask(11748, 5712)
	mask = "000001000X1011111110X11X0XX11101100X"
	memMask(28073, 257781932)
	memMask(32292, 7788)
	memMask(47529, 21491591)
	memMask(26354, 3991)
	memMask(46496, 225777)
	memMask(19054, 6818)
	memMask(46391, 1804050)
	mask = "0X01X1110011111101X011X1X10010011100"
	memMask(8848, 3301953)
	memMask(21325, 828483041)
	memMask(35954, 393891988)
	mask = "001010XX11X0X11X1010001000001111X1X1"
	memMask(14556, 48978)
	memMask(17078, 3023995)
	memMask(41895, 1263)
	memMask(26354, 982)
	memMask(47494, 9997)
	memMask(42458, 139205796)
	mask = "01011X0X01XX11X11X10001X010X10001100"
	memMask(30326, 230268)
	memMask(13671, 406)
	memMask(13219, 816366)
	mask = "00X0111000101101XX10X010X100X0101X01"
	memMask(9172, 5603)
	memMask(10540, 399)
	memMask(6994, 2969)
	memMask(41827, 157730)
	memMask(57564, 713362)
	memMask(16823, 335722)
	memMask(38893, 724)
	mask = "X1X10110011111X01X101X111101X0X1X000"
	memMask(5336, 623)
	memMask(31859, 88241437)
	memMask(7282, 19257561)
	memMask(37684, 5467271)
	memMask(50354, 2120264)
	mask = "0000X100111X1111X1X001X0000X00110001"
	memMask(61468, 9124391)
	memMask(35212, 23096803)
	memMask(9949, 9454)
	memMask(1331, 995)
	memMask(39238, 74423)
	mask = "00100100111X1111111011X1XX010X1X0010"
	memMask(39294, 114968517)
	memMask(23155, 1708)
	memMask(29927, 7693420)
	memMask(26742, 2017)
	mask = "001001001X101111X1X0XX01100X0X0101XX"
	memMask(29056, 30646)
	memMask(59210, 113022)
	memMask(43000, 144138476)
	memMask(35167, 721)
	memMask(30809, 507151422)
	mask = "0001X0100101111010X0100000X0X0100010"
	memMask(34554, 49221)
	memMask(7437, 62877)
	memMask(59828, 184498)
	memMask(45586, 20089049)
	memMask(48248, 98197865)
	memMask(44772, 113026522)
	mask = "00X0X000111X11111010X10X1011010X0X01"
	memMask(40499, 11427785)
	memMask(60906, 496319403)
	memMask(55126, 270707060)
	mask = "001XXXX10011X1111000110X0X000XX10001"
	memMask(17938, 535040)
	memMask(59138, 250862772)
	memMask(8507, 41576622)
	memMask(14146, 1026)
	memMask(32774, 2975)
	memMask(39952, 440004)
	memMask(13671, 2552)
	mask = "00000100X110111X111001X0X10X0XX100X1"
	memMask(43163, 1156)
	memMask(35680, 6039549)
	memMask(15378, 657)
	memMask(52635, 15396)
	memMask(25926, 210)
	memMask(28827, 206264701)
	mask = "001X100X001X1111100011X1XX1000100X01"
	memMask(5753, 1286)
	memMask(6271, 6375)
	memMask(47122, 5264524)
	mask = "0X01100XXX10111X1X100X10000X1000001X"
	memMask(51736, 2480)
	memMask(16722, 663122146)
	memMask(18483, 119830)
	memMask(13423, 136699070)
	memMask(65442, 23484946)
	memMask(50742, 716)
	memMask(14788, 129808)
	mask = "100100000X101111111001000101X00X01X0"
	memMask(35279, 11923915)
	memMask(12886, 216539704)
	memMask(29197, 258471)
	memMask(34051, 24342647)
	memMask(34556, 219870381)
	mask = "0010X100011011X11110X1101X010X1001X1"
	memMask(17497, 684)
	memMask(8762, 255129)
	memMask(44486, 49869056)
	memMask(35680, 210517)
	memMask(18805, 17289)
	mask = "001011101X1011111X01111010001000XX01"
	memMask(31918, 89826257)
	memMask(31090, 57962)
	memMask(53807, 2817)
	memMask(12784, 2137)
	memMask(31369, 64658)
	mask = "X000X1X0011011111010X0X111XX00X1X100"
	memMask(63989, 3267)
	memMask(23677, 2600)
	memMask(42781, 125518)
	memMask(37480, 3172)
	memMask(23573, 8287963)
	mask = "0010110001111XXX10XX0X1X0X0000010100"
	memMask(1654, 317418946)
	memMask(46425, 459126)
	memMask(31666, 9190945)
	memMask(12079, 168185843)
	memMask(39256, 178728)
	memMask(52287, 59458806)
	mask = "000001000110111X1010X00000X100110X00"
	memMask(55820, 2071)
	memMask(33429, 821261571)
	memMask(16244, 3215)
	mask = "100110100110X1111110X01101X1XX10X011"
	memMask(47796, 98)
	memMask(31040, 1031334)
	memMask(9622, 1580517)
	mask = "00100X001110XX11110000011101X0011001"
	memMask(42781, 312404)
	memMask(39942, 123252858)
	memMask(20867, 1356)
	memMask(14667, 576)
	memMask(35502, 298476332)
	memMask(53427, 365745)
	mask = "00010X100110111111100010XX00XX000100"
	memMask(53876, 603517)
	memMask(10405, 16459102)
	memMask(45543, 4443)
	memMask(41543, 1411)
	memMask(62450, 6470215)
	mask = "100X110X11111X110X0010000X0X10001X10"
	memMask(5336, 650575)
	memMask(50124, 3080229)
	memMask(51618, 156)
	memMask(42185, 1366)
	mask = "00X0X1101110101110XX1011X001001110X0"
	memMask(30736, 333574460)
	memMask(13675, 8643742)
	memMask(12826, 453315)
	mask = "000X00100X1X1X111XX0101X0X100111000X"
	memMask(54995, 183737953)
	memMask(63234, 679)
	memMask(61488, 337)
	mask = "0XX11111X0111X1X01001111X00X11001XX1"
	memMask(10621, 122118726)
	memMask(6109, 9210)
	memMask(15688, 184799)
	memMask(25564, 367237)
	mask = "00110000011X1111100X000X00XXX1XX1000"
	memMask(17938, 33020705)
	memMask(2666, 88651117)
	memMask(21482, 161753)

	bigo := 0
	for _, v := range memb {
		bigo += v
	}
	fmt.Println("part2", bigo)
}

func memMask(addr int, v int) {
	addrs := applyMaskAddr(addr)
	for _, addr := range addrs {
		memb[addr] = v
	}

}
func applyMaskAddr(in int) (newInts []int64) {
	strbin := strconv.FormatInt(int64(in), 2)
	if len(strbin) != len(mask) {
		zero := ""
		for i := 0; i < (len(mask) - len(strbin)); i++ {
			zero += "0"
		}
		strbin = zero + strbin
	}
	newBin := make([]rune, len(strbin))
	runeMask := []rune(mask)
	xs := 0
	for idx, runeBin := range strbin {
		switch runeMask[idx] {
		case '1':
			newBin[idx] = '1'
		case '0':
			newBin[idx] = runeBin
		case 'X':
			newBin[idx] = 'X'
			xs++
		}
	}
	addrs := []string{string(newBin)}
	for i := 0; i < xs; i++ {
		addrs = explodeAddrs(addrs)
	}

	for _, addr := range addrs {
		newInt, err := strconv.ParseInt(addr, 2, 64)
		if err != nil {
			panic("lol")
		}
		newInts = append(newInts, newInt)
	}
	return newInts

}

func explodeAddrs(addrs []string) []string {
	newArrs := []string{}
	for _, addr := range addrs {
		addr1 := addr
		addr0 := addr
		addr1 = strings.Replace(addr1, "X", "1", 1)
		addr0 = strings.Replace(addr0, "X", "0", 1)
		newArrs = append(newArrs, addr1, addr0)
	}
	return newArrs
}
